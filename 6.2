6.2 A CART:

<?php
session_start();

function dodaj($tableIndex){
    //echo $tableIndex;
    $file = fopen("produkty", "r") or die ("error: dead");
    while (!feof($file) ) {
        $table[] = fgetcsv($file);
    }

    if(empty($_SESSION['cart'])){
        $file = fopen("produkty", "r") or die ("error: dead");
        while (!feof($file) ) {
            $_SESSION['cart'][] = fgetcsv($file);
        }
        $i=0;
        foreach($_SESSION['cart'] as $a){
            $_SESSION['cart'][$i][1] = 0;
            $_SESSION['cart'][$i][2] = (int)$_SESSION['cart'][$i][2];
            $i++;
        }

    }
    $_SESSION['cart'][$tableIndex][1] += 1;

    $_SESSION['cart'][$tableIndex][2] = $table[$tableIndex][2]*$_SESSION['cart'][$tableIndex][1];
    totalPrice();
}
function usun($tableIndex){
    $file = fopen("produkty", "r") or die ("error: dead");
    while (!feof($file) ) {
        $table[] = fgetcsv($file);
    }

    $_SESSION['cart'][$tableIndex][1]-=1;
    $_SESSION['cart'][$tableIndex][2]=$table[$tableIndex][2]*$_SESSION['cart'][$tableIndex][1];
    totalPrice();
}
function wyczysc(){
    unset($_SESSION['cart']);
    unset($_SESSION['totalPrice']);
}
function totalPrice(){
    $_SESSION['totalPrice'] = 0;
foreach($_SESSION['cart'] as $a){
    if($a[1]<>0){
        $_SESSION['totalPrice'] += $a[2];
    }

}}

-----------------------------------------------------------------------------------

6.2 B INDEX: 

<?php
include 'cartHandle.php';
$file = fopen("produkty", "r") or die ("error: dead");
while (!feof($file) ) {
    $tablica[] = fgetcsv($file);
}
for($i = 0; $i < count($tablica); $i++) {
    if (isset($_GET['add'.$i])){
        dodaj($i);
    }
    }
for($i = 0; $i < count($tablica); $i++) {
    if (isset($_GET['del'.$i])){
        usun($i);
    }
}
if(isset($_GET['clear'])){
    wyczysc();
}
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <title>koszyk</title>
</head>
<body>
<table>
    <form method = "get">
<?php
$i = 0;
foreach($tablica as $a){
    echo '<tr>';
    echo "<td>".$a[0]."</td><td>".$a[1]."</td><td>".$a[2]."zł </td>";
    echo '<td><input type = "submit" name = "add'.$i.'" value = "do koszyka"><br><br></td>';
    $i++;
    echo '</tr>';
}
?>
    </form>
</table>
<h1>Koszyk</h1>
<?php
if(!empty($_SESSION['cart'])){
    echo '<table>
    <form method = "get">';

        $i = 0;
        foreach($_SESSION['cart'] as $a){
            if($a[1] > 0){
                echo '<tr>';
                echo "<td>".$a[0]."</td><td>".$a[1]."</td><td>".$a[2]."zł </td>";
                echo '<td><input type = "submit" name = "del'.$i.'" value = "usuń"><br><br></td>';
                $i++;
                echo '</tr>';
            }
            else{
                echo '<tr hidden>';
                echo "<td>".$a[0]."</td><td>".$a[1]."</td><td>".$a[2]."zł </td>";
                echo '<td><input type = "submit" name = "del'.$i.'" value = "usuń"><br><br></td>';
                $i++;
                echo '</tr>';
            }
        }
        echo "Total price: ".$_SESSION['totalPrice'];
        echo '<tr><td><input type = "submit" name = "clear" value = "wyczyść"></td></tr>
    </form>
    </table>';
}
?>
</body>
</html>

--------------------------------------------------------------------------------------------------------

6.2 C PRODUKTY:

goździki, 1, 15
tulipany, 1, 20
piwonie, 1, 30
bzy, 1, 35
